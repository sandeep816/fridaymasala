---
import Layout from '../layouts/Layout.astro';
import ActorCard from '../components/ActorCard.astro';
import { fetchPopularActors } from '../lib/tmdb';

let popularActors: any[] = [];
let usingFallbackData = false;

try {
  popularActors = await fetchPopularActors();
} catch (error) {
  console.warn('Using fallback data due to API issues:', error);
  usingFallbackData = true;
  popularActors = [];
}
---

<Layout title="Celebrities - Friday Masala" description="Discover the most popular actors and celebrities in the film industry.">
  {usingFallbackData && (
    <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 mb-4">
      <div class="flex">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3">
          <p class="text-sm">
            <strong>Network Notice:</strong> Currently showing sample data due to API connectivity issues. 
            The website will automatically update when the connection is restored.
          </p>
        </div>
      </div>
    </div>
  )}

  <!-- Hero Section -->
  <div class="bg-gradient-to-r from-red-600 to-red-800 text-white py-16">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-4xl md:text-6xl font-bold mb-4">üåü Celebrities</h1>
      <p class="text-xl md:text-2xl mb-8">Discover the most popular actors and celebrities in Hollywood</p>
      <div class="flex justify-center space-x-4">
        <div class="bg-white/20 rounded-lg px-6 py-3">
          <div class="text-2xl font-bold">{popularActors.length}</div>
          <div class="text-sm">Celebrities</div>
        </div>
        <div class="bg-white/20 rounded-lg px-6 py-3">
          <div class="text-2xl font-bold">‚≠ê</div>
          <div class="text-sm">Top Rated</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Celebrities Grid -->
  <section class="py-12 bg-gray-50">
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between mb-8">
        <h2 class="text-3xl font-bold text-gray-900">üé≠ Popular Celebrities</h2>
        <div class="text-gray-600">
          Showing {popularActors.length} celebrities
        </div>
      </div>
      
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
        {popularActors.map((actor) => (
          <ActorCard actor={actor} />
        ))}
      </div>
      
      {popularActors.length === 0 && (
        <div class="text-center py-12">
          <div class="text-6xl mb-4">üé¨</div>
          <h3 class="text-xl font-semibold text-gray-900 mb-2">No Celebrities Found</h3>
          <p class="text-gray-600">Try refreshing the page or check back later.</p>
        </div>
      )}
    </div>
  </section>

  <!-- Ad Banner -->
  <div class="py-8 bg-white">
    <div class="container mx-auto px-4">
      <div class="bg-gray-200 rounded-lg p-8 text-center">
        <h3 class="text-lg font-semibold text-gray-700 mb-2">Advertisement</h3>
        <p class="text-gray-600">Ad space for Google AdSense</p>
        <div class="mt-4 text-sm text-gray-500">
          <!-- Google AdSense Code Here -->
          <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script>
        </div>
      </div>
    </div>
  </div>
</Layout> 